<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>WebGIS PSU Ngawi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<link rel="stylesheet" href="style.css">
</head>

<body>

<!-- TOPBAR -->
<div class="topbar">
    <div class="left">
        <img src="logo.png" class="logo">
        <div class="title">
            <h3>WEBGIS PSU</h3>
            <span>Kabupaten Ngawi</span>
        </div>
    </div>

    <div class="menu">
        <a href="#">Jalan</a>
        <a href="#">Drainase</a>
        <a href="#">RTH</a>
        <input type="text" placeholder="Cari...">
    </div>
</div>

<!-- MAP -->
<div id="map"></div>

<!-- PANEL KANAN -->
<div class="layer-panel">
    <h4>Basemap</h4>
    <label><input type="radio" name="base" checked onclick="setBasemap(osm)"> OpenStreetMap</label>
    <label><input type="radio" name="base" onclick="setBasemap(satelit)"> Satelit</label>

    <h4>Layer</h4>
    <label><input type="checkbox" checked onclick="toggleLayer(jalanLayer)"> Jalan</label>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>

// MAP
var map = L.map('map').setView([-7.4,111.4],12);

// BASEMAP
var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);

var satelit = L.tileLayer(
'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
{maxZoom:18}
);

// STYLE JALAN
function style(){
    return {color:"red", weight:5};
}

// LOAD GEOJSON
var jalanLayer;

fetch("Jalan.geojson")
.then(res=>res.json())
.then(data=>{

    jalanLayer = L.geoJSON(data,{
        style:style,
        onEachFeature:(f,l)=>{
            l.bindPopup("<b>Nama Jalan:</b> "+f.properties.Nama);
        }
    }).addTo(map);

    map.fitBounds(jalanLayer.getBounds());
});

// FUNGSI BASEMAP
function setBasemap(layer){
    map.eachLayer((l)=>{
        if(l instanceof L.TileLayer) map.removeLayer(l);
    });
    layer.addTo(map);
}

// TOGGLE LAYER
function toggleLayer(layer){
    if(map.hasLayer(layer)){
        map.removeLayer(layer);
    }else{
        map.addLayer(layer);
    }
}

</script>

</body>
</html>
